<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="styles/iletisim.css">
    <link rel="shortcut icon" href="assets/hacker.png" type="image/x-icon">
    <title>N.A. | İletişim</title>
</head>
<body>
        <!--============Navbar Starts============-->
        <nav>
            <div class="logo"><i class="fa-solid fa-user-secret"></i><a href="hakkimda.html">N.A.</a></div>
            <label for="btn" class="icon">
                <span class="fa fa-bars"></span>
            </label>
            <input type="checkbox" id="btn">
            <ul>
                <li><a href="ozgecmisim.html">Özgeçmişim</a></li>
                <li>
                    <label for="btn-1" class="show">Şehrim +</label>
                      <a href="sehrim.html">Şehrim</a>
                      <input type="checkbox" id="btn-1">
                  <ul>
                      <li><a href="takimimiz.html">Takımımız</a></li>
                      <li><a href="mirasimiz.html">Mirasımız</a></li>
                  </ul>
                </li>
                <li><a href="ilgialanlarim.html">İlgi Alanlarım</a></li>
                <li><a href="iletisim.html">İletişim</a></li>
            </ul>
        </nav>
        <!--============Navbar Ends============-->
        <!--============Contact Starts============-->
        <div><hr></div>
        <section class="contact">
            <h2>Bana Ulaşın!</h2>
            <form action="#">
                <div class="input-box">
                    <div class="input-field field">
                        <input type="text" placeholder="Adınız Soyadınız" id="name" class="item" autocomplete="off">
                        <div class="error-txt">Ad ve Soyad boş bırakılamaz</div>
                    </div>
                    <div class="input-field field">
                        <input type="text" placeholder="Email adresiniz" id="email" class="item" autocomplete="off">
                        <div class="error-txt email">Email adresi boş bırakılamaz</div>
                    </div>
                </div>
                <div class="input-box">
                    <div class="input-field field">
                        <input type="text" placeholder="Telefon numaranız" id="phone" class="item" autocomplete="off">
                        <div class="error-txt">Telefon numarası boş bırakılamaz</div>
                    </div>
                    <div class="input-field field">
                        <input type="text" placeholder="Konu" id="subject" class="item" autocomplete="off">
                        <div class="error-txt">Konu boş bırakılamaz</div>
                    </div>
                </div>
                <div class="textarea-field field">
                    <textarea name="" id="message" cols="30" rows="10" placeholder="Mesajınız" class="item" autocomplete="off"></textarea>
                    <div class="error-txt">Mesaj boş bırakılamaz</div>
                </div>
                <button type="submit">Gönder</button>
            </form>
        </section>
        <script src="https://smtpjs.com/v3/smtp.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script>
            const form = document.querySelector('form');
            const fullName = document.getElementById("name");
            const email = document.getElementById("email");
            const phone = document.getElementById("phone");
            const subject = document.getElementById("subject");
            const message = document.getElementById("message");
            function sendEmail() {
                const bodyMessage = `Ad ve Soyad: ${fullName.value}<br>
                                     Email: ${email.value}<br>
                                     Telefon No: ${phone.value}<br>
                                     Konu: ${subject.value}<br>
                                     Mesaj: ${message.value}<br>`;
                Email.send({
                    SecureToken : "d8a6bcdf-f2de-4e90-9446-0744e45a23e8",
                    To : 'askhervn@gmail.com',
                    From : "askhervn@gmail.com",
                    Subject : subject.value,
                    Body : bodyMessage
                }).then(
                    message => {
                        if (message == "OK") {
                            Swal.fire({
                                title: "Başarılı!",
                                text: "Mesajınız başarıyla gönderilmiştir!",
                                icon: "success"
                            });
                        }
                    }
                );
            }
            function checkInputs() {
                const items = document.querySelectorAll(".item");
                for (const item of items) {
                    if (item.value == "") {
                        item.classList.add("error");
                        item.parentElement.classList.add("error");
                    }

                    if (items[1].value != "") {
                        checkEmail();
                    }

                    items[1].addEventListener("keyup", () => {
                        checkEmail();
                    });

                    item.addEventListener("keyup", () => {
                        if(item.value != "") {
                        item.classList.remove("error");
                        item.parentElement.classList.remove("error");
                        }
                        else {
                        item.classList.add("error");
                        item.parentElement.classList.add("error");
                        }
                    });
                }
            }
            function checkEmail() {
                const emailRegex = /^([a-z\d\.-]+)@([a-z\d\.-]+)\.([a-z]{2,3})(\.[a-z]{2,3})?$/;
                
                const errTxtEmail = document.querySelector(".error-txt.email");
                
                if (!email.value.match(emailRegex)) {
                    email.classList.add("error");
                    email.parentElement.classList.add("error");

                    if(email.value != "") {
                        errTxtEmail.innerText = "Geçerli email adresi giriniz";
                    }
                    else {
                        errTxtEmail.innerText = "Email adresi boş bırakılamaz";
                    }
                }
                else {
                    email.classList.remove("error");
                    email.parentElement.classList.remove("error");
                }
            }
            form.addEventListener("submit", (e) => {
                e.preventDefault();
                checkInputs();
                if (!fullName.classList.contains("error") && !email.classList.contains("error") && !phone.classList.contains("error") && !subject.classList.contains("error") && !message.classList.contains("error")) {
                    sendEmail();

                    form.reset();
                    return false;
                }
            });
        </script>
        <!--============Contact Ends============-->
        <!--============Footer Starts============-->
        <footer>
            <div><hr></div>
            <p><i class="fa-regular fa-copyright" style="color: #ffffff;"></i> 2024 Personal, Inc</p>
         </footer>
        <!--============Footer Ends============-->
</body>
</html>